<?xml version="1.0" encoding="utf-8"?>
<Page
    x:Class="Attestia.App.Pages.DashboardPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Loaded="Page_Loaded">

    <ScrollViewer>
        <StackPanel Padding="24" Spacing="16">
            <!-- Header -->
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*" />
                    <ColumnDefinition Width="Auto" />
                </Grid.ColumnDefinitions>
                <TextBlock Text="Dashboard" FontSize="28" FontWeight="SemiBold" />
                <Button Grid.Column="1" Content="Refresh" Click="Refresh_Click" />
            </Grid>

            <!-- Status cards row -->
            <Grid ColumnSpacing="12">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*" />
                    <ColumnDefinition Width="*" />
                    <ColumnDefinition Width="*" />
                    <ColumnDefinition Width="*" />
                </Grid.ColumnDefinitions>

                <!-- Intents card -->
                <Grid Grid.Column="0" Padding="16" CornerRadius="8"
                      Background="{ThemeResource CardBackgroundFillColorDefaultBrush}"
                      BorderBrush="{ThemeResource CardStrokeColorDefaultBrush}"
                      BorderThickness="1">
                    <StackPanel Spacing="4">
                        <TextBlock Text="Intents" FontSize="12"
                                   Foreground="{ThemeResource TextFillColorSecondaryBrush}" />
                        <TextBlock x:Name="IntentCountText" Text="—" FontSize="32" FontWeight="Bold" />
                    </StackPanel>
                </Grid>

                <!-- Merkle Root card -->
                <Grid Grid.Column="1" Padding="16" CornerRadius="8"
                      Background="{ThemeResource CardBackgroundFillColorDefaultBrush}"
                      BorderBrush="{ThemeResource CardStrokeColorDefaultBrush}"
                      BorderThickness="1">
                    <StackPanel Spacing="4">
                        <TextBlock Text="Merkle Leaves" FontSize="12"
                                   Foreground="{ThemeResource TextFillColorSecondaryBrush}" />
                        <TextBlock x:Name="LeafCountText" Text="—" FontSize="32" FontWeight="Bold" />
                    </StackPanel>
                </Grid>

                <!-- Latest Attestation card -->
                <Grid Grid.Column="2" Padding="16" CornerRadius="8"
                      Background="{ThemeResource CardBackgroundFillColorDefaultBrush}"
                      BorderBrush="{ThemeResource CardStrokeColorDefaultBrush}"
                      BorderThickness="1">
                    <StackPanel Spacing="4">
                        <TextBlock Text="Latest Attestation" FontSize="12"
                                   Foreground="{ThemeResource TextFillColorSecondaryBrush}" />
                        <TextBlock x:Name="AttestationText" Text="—" FontSize="14"
                                   TextTrimming="CharacterEllipsis" />
                    </StackPanel>
                </Grid>

                <!-- Sidecar status card -->
                <Grid Grid.Column="3" Padding="16" CornerRadius="8"
                      Background="{ThemeResource CardBackgroundFillColorDefaultBrush}"
                      BorderBrush="{ThemeResource CardStrokeColorDefaultBrush}"
                      BorderThickness="1">
                    <StackPanel Spacing="4">
                        <TextBlock Text="Sidecar" FontSize="12"
                                   Foreground="{ThemeResource TextFillColorSecondaryBrush}" />
                        <TextBlock x:Name="SidecarText" Text="—" FontSize="14" />
                    </StackPanel>
                </Grid>
            </Grid>

            <!-- Merkle Root -->
            <Grid Padding="16" CornerRadius="8"
                  Background="{ThemeResource CardBackgroundFillColorDefaultBrush}"
                  BorderBrush="{ThemeResource CardStrokeColorDefaultBrush}"
                  BorderThickness="1">
                <StackPanel Spacing="4">
                    <TextBlock Text="Merkle Root" FontSize="12"
                               Foreground="{ThemeResource TextFillColorSecondaryBrush}" />
                    <TextBlock x:Name="MerkleRootText" Text="—" FontFamily="Consolas"
                               IsTextSelectionEnabled="True" TextWrapping="Wrap" />
                </StackPanel>
            </Grid>

            <!-- Error state with retry -->
            <Grid x:Name="ErrorPanel" Visibility="Collapsed"
                  Padding="16" CornerRadius="8"
                  Background="{ThemeResource SystemFillColorCriticalBackgroundBrush}"
                  BorderBrush="{ThemeResource SystemFillColorCriticalBrush}"
                  BorderThickness="1">
                <StackPanel Orientation="Horizontal" Spacing="12">
                    <FontIcon Glyph="&#xE783;" Foreground="Red" />
                    <TextBlock x:Name="ErrorText" Foreground="Red" VerticalAlignment="Center" TextWrapping="Wrap" />
                    <Button Content="Retry" Click="Refresh_Click" VerticalAlignment="Center" />
                </StackPanel>
            </Grid>

            <!-- Loading -->
            <ProgressRing x:Name="LoadingRing" IsActive="False" Width="24" Height="24"
                          HorizontalAlignment="Left" />
        </StackPanel>
    </ScrollViewer>
</Page>
