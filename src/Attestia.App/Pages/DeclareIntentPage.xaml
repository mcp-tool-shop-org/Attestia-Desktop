<?xml version="1.0" encoding="utf-8"?>
<Page
    x:Class="Attestia.App.Pages.DeclareIntentPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">

    <ScrollViewer>
        <StackPanel Padding="32,28,32,32" Spacing="20" MaxWidth="640">
            <!-- Back + header -->
            <StackPanel Orientation="Horizontal" Spacing="12">
                <Button Content="Back" Click="Back_Click" />
                <FontIcon Glyph="&#xE8A1;" FontSize="22"
                          Foreground="{ThemeResource TextFillColorSecondaryBrush}"
                          VerticalAlignment="Center" />
                <TextBlock Text="Declare Intent" FontSize="28" FontWeight="SemiBold"
                           VerticalAlignment="Center" />
            </StackPanel>

            <TextBlock Text="Record a financial action before it happens on-chain. This creates an auditable starting point for the intent lifecycle."
                       FontSize="13" Foreground="{ThemeResource TextFillColorSecondaryBrush}"
                       TextWrapping="Wrap" LineHeight="20" />

            <!-- Form -->
            <Grid Padding="20" CornerRadius="8"
                  Background="{ThemeResource CardBackgroundFillColorDefaultBrush}"
                  BorderBrush="{ThemeResource CardStrokeColorDefaultBrush}"
                  BorderThickness="1">
                <StackPanel Spacing="12">
                    <TextBox x:Name="IntentIdBox" Header="Intent ID" PlaceholderText="e.g. intent-001" />

                    <ComboBox x:Name="KindCombo" Header="Kind" PlaceholderText="Select kind"
                              Width="200" SelectedIndex="0">
                        <ComboBoxItem Content="transfer" />
                        <ComboBoxItem Content="payment" />
                        <ComboBoxItem Content="swap" />
                        <ComboBoxItem Content="stake" />
                        <ComboBoxItem Content="other" />
                    </ComboBox>

                    <TextBox x:Name="DescriptionBox" Header="Description"
                             PlaceholderText="Describe the intent"
                             TextWrapping="Wrap" AcceptsReturn="False" Height="80" />

                    <TextBox x:Name="FromBox" Header="From Address (optional)"
                             PlaceholderText="0x..." />

                    <TextBox x:Name="ToBox" Header="To Address (optional)"
                             PlaceholderText="0x..." />

                    <StackPanel Orientation="Horizontal" Spacing="8">
                        <TextBox x:Name="AmountBox" Header="Amount (optional)"
                                 PlaceholderText="100.00" Width="200" />
                        <ComboBox x:Name="CurrencyCombo" Header="Currency"
                                  Width="120" SelectedIndex="0">
                            <ComboBoxItem Content="USD" />
                            <ComboBoxItem Content="EUR" />
                            <ComboBoxItem Content="ETH" />
                            <ComboBoxItem Content="BTC" />
                        </ComboBox>
                    </StackPanel>

                    <TextBox x:Name="ChainIdBox" Header="Chain ID (optional)"
                             PlaceholderText="e.g. evm:1" />

                    <Button Content="Declare Intent" Click="Declare_Click"
                            Style="{ThemeResource AccentButtonStyle}"
                            HorizontalAlignment="Left" Margin="0,8,0,0" />
                </StackPanel>
            </Grid>

            <!-- Success -->
            <Grid x:Name="SuccessPanel" Visibility="Collapsed" Padding="20" CornerRadius="8"
                  Background="{ThemeResource SystemFillColorSuccessBackgroundBrush}"
                  BorderBrush="{ThemeResource SystemFillColorSuccessBrush}"
                  BorderThickness="1">
                <StackPanel Spacing="6">
                    <TextBlock Text="Intent declared successfully" FontWeight="SemiBold" FontSize="14" />
                    <TextBlock x:Name="DeclaredIdText" FontFamily="Consolas" FontSize="13" />
                    <Button Content="View Intent" Click="ViewDeclared_Click" Margin="0,8,0,0" />
                </StackPanel>
            </Grid>

            <!-- Loading / Error -->
            <StackPanel Orientation="Horizontal" Spacing="8">
                <ProgressRing x:Name="LoadingRing" IsActive="False" Width="20" Height="20" />
                <TextBlock x:Name="ErrorText" FontSize="13"
                           Foreground="{ThemeResource SystemFillColorCautionBrush}" />
            </StackPanel>
        </StackPanel>
    </ScrollViewer>
</Page>
